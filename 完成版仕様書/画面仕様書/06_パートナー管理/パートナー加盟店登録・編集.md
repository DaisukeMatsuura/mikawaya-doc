# パートナー加盟店登録・編集

ステータス: 確定
ユーザー種別: 管理者
概要: パートナー企業の登録・編集
機能番号: M-002
画面種別: モーダル

---

## 🎯 画面の目的

管理者がパートナー加盟店の基本情報（企業名、代表者名、営業時間等）を登録・編集できるようにする。

---

## 📊 表示データ項目

### 基本情報セクション

| 項目名 | データ型 | 必須 | 備考 |
| --- | --- | --- | --- |
| パートナー企業名 | String | ◯ | 最大50文字 |
| 代表者名 | String | ◯ | 最大50文字 |
| 代表者ふりがな | String | ◯ | ひらがな、最大50文字 |
| 企業電話番号 | String | ◯ | 正規表現で検証 |
| 企業住所 | String | ◯ | 都道府県 + 市区町村 + 住所 |

### 営業情報セクション

| 項目名 | データ型 | 必須 | 備考 |
| --- | --- | --- | --- |
| 営業開始時間 | Time | ◯ | HH:MM形式 |
| 営業終了時間 | Time | ◯ | HH:MM形式 |
| 定休日 | MultiSelect | △ | 月〜日のチェックボックス |

### ステータス情報セクション

| 項目名 | データ型 | 必須 | 備考 |
| --- | --- | --- | --- |
| ステータス | Enum | ◯ | アクティブ / 非アクティブ |
| 備考 | Text | △ | 最大500文字 |

---

## ⚙️ 機能・操作

| 要素 | 操作 | 動作 |
| --- | --- | --- |
| キャンセルボタン | クリック | モーダルを閉じる |
| 保存ボタン | クリック | 入力内容をバリデーション → サーバーに送信 |
| ステータスドロップダウン | クリック | メニューを表示 |
| 営業時間入力 | クリック | タイムピッカーを表示 |
| 定休日チェック | クリック | 複数選択可 |

---

## 🔄 状態パターン

| 状態 | 表示内容 |
| --- | --- |
| 登録モード（新規） | 空のフォーム + 保存/キャンセルボタン |
| 編集モード（既存） | 既存データでプリフィルされたフォーム |
| 保存中 | ローディング表示、保存ボタン無効化 |
| 保存完了 | トースト通知「パートナー加盟店を登録しました」または「更新しました」 |

---

## ✅ バリデーション

| 項目 | ルール | エラーメッセージ |
| --- | --- | --- |
| パートナー企業名 | 必須、1-50文字 | 「パートナー企業名を入力してください。」 |
| 代表者名 | 必須、1-50文字 | 「代表者名を入力してください。」 |
| 代表者ふりがな | 必須、ひらがな、1-50文字 | 「ふりがなをひらがなで入力してください。」 |
| 企業電話番号 | 必須、正規表現 | 「正しい電話番号を入力してください。」 |
| 企業住所 | 必須 | 「企業住所を入力してください。」 |
| 営業開始時間 | 必須 | 「営業開始時間を入力してください。」 |
| 営業終了時間 | 必須、開始時間より後 | 「終了時間は開始時間より後の時刻にしてください。」 |

---

## 🔐 権限

| ユーザー種別 | 作成 | 編集 | 削除 |
| --- | --- | --- | --- |
| 管理者 | ◯ | ◯ | ◯ |
| オペレータ | ✕ | ✕ | ✕ |
| パートナー | ✕ | ✕ | ✕ |
| コンシェルジュ | ✕ | ✕ | ✕ |

---

## 📝 備考

- API: `POST /api/admin/partners` (新規), `PUT /api/admin/partners/{id}` (編集)
- モーダル形式で表示
- 保存時の成功メッセージ：「パートナー加盟店を登録しました」（新規）/ 「パートナー加盟店を更新しました」（編集）
- 営業時間の自動検証：終了時間 > 開始時間
- 管理者のみアクセス可