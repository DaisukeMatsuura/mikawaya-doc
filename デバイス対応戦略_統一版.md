# まごころサポート システム - デバイス対応戦略

**ドキュメント作成日**: 2026-01-09
**ステータス**: 最終版

---

## 1. デバイス対応戦略の定義

### 1.1 対応デバイス区分

| 区分 | デバイス | 開発方針 |
| --- | --- | --- |
| **PC対応** | Windows, macOS デスクトップブラウザ | Responsive Web Design対応 |
| **スマホ専用** | iPhone, Android | スマホに最適化されたUI/UX |
| **タブレット対応** | iPad, Android タブレット | Responsive Web Design対応 |

### 1.2 対応パターン

#### パターンA: PC対応（Responsive）
- **対象画面**: 管理・運用向けの多くの機能
- **開発方針**: 1つのHTMLで、CSS Mediaクエリで対応
- **画面サイズ**:
  - PC: 1920×1080 以上
  - タブレット: 768px 以上
  - スマホ: 375px～767px（表示は可能だが最適化されない）
- **デバッグツール**: Chrome DevTools の Responsive Design Mode

#### パターンB: スマホ専用
- **対象画面**: 現場対応者（コンシェルジュ）向け
- **開発方針**: スマホの画面サイズに最適化されたUI
- **画面サイズ**: 320px～480px 推奨（iPhone SE等）
- **操作**: タップ操作を中心に設計
- **データ表示**: 簡潔で視認性を重視
- **注**: タブレット・PCでも動作するが、最適化されない

#### パターンC: タブレット対応（Responsive）
- **対象画面**: ダッシュボード等で使用される可能性がある画面
- **開発方針**: Responsive Web Design で自動対応
- **画面サイズ**: 768px～1024px での最適化

---

## 2. 画面別のデバイス対応一覧

### 管理・運用系（PC対応 + Responsive）

| 画面 | パターン | 備考 |
| --- | --- | --- |
| ログイン | PC対応 | スマホでも表示可能（最適化なし） |
| パスワード再設定 | PC対応 | スマホでも表示可能 |
| エラー画面 | PC対応 | スマホでも表示可能 |
| ダッシュボード（オペレータ） | PC対応 | 未着手（管理者・パートナー版も） |
| お客様一覧（全版） | PC対応 | パートナー版も含む |
| お客様詳細（全版） | PC対応 | パートナー版も含む |
| 案件一覧（オペレータ・パートナー版） | PC対応 | スマホは非推奨 |
| 案件詳細（オペレータ・パートナー版） | PC対応 | スマホは非推奨 |
| 案件作成・編集（全版） | PC対応 | スマホでは小さい |
| アカウント管理一覧 | PC対応 | 管理者向け |
| パートナー加盟店管理（全画面） | PC対応 | 管理者向け |
| サービス・サポート種別管理 | PC対応 | 管理者向け |

### 現場対応系（スマホ専用）

| 画面 | パターン | 特性 |
| --- | --- | --- |
| ダッシュボード（コンシェルジュ） | スマホ専用 | スマホ最適化、タップ操作中心 |
| 案件一覧（コンシェルジュ） | スマホ専用 | 簡潔な表示（訪問日・案件No・ステータスのみ） |
| 案件詳細（コンシェルジュ） | スマホ専用 | 重要情報を優先表示 |
| 案件作成・編集（コンシェルジュ） | スマホ専用 | フォーム→画面遷移（モーダルでない） |
| 作業報告 | スマホ専用 | 画像アップロード、テキスト入力 |
| 完了報告一覧 | スマホ専用 | 完了した案件の確認 |

---

## 3. 画面設計の詳細

### 3.1 PC対応（Responsive）の設計

#### ブレークポイント

```css
/* Small (スマホ) */
@media (max-width: 575px) {
  /* 375px - 575px */
  /* 1カラムレイアウト */
}

/* Medium (タブレット) */
@media (min-width: 576px) and (max-width: 767px) {
  /* 576px - 767px */
  /* 1-2カラムレイアウト */
}

/* Large (タブレット・PC) */
@media (min-width: 768px) {
  /* 768px 以上 */
  /* 2-3カラムレイアウト */
}

/* Extra Large (PC) */
@media (min-width: 1200px) {
  /* 1200px 以上 */
  /* 最大幅固定, 3カラム */
}
```

#### ナビゲーション
- **PC**: トップメニューバー + サイドメニュー（折りたたみ可能）
- **タブレット**: トップメニュー + ハンバーガーメニュー
- **スマホ**: ハンバーガーメニュー（画面幅に応じて自動展開）

#### テーブル表示
- **PC**: 全カラム表示
- **タブレット**: 重要カラムのみ表示、横スクロール可
- **スマホ**: カード型表示に変換

#### フォーム
- **PC**: 2カラムレイアウト（複数フィールド同時表示）
- **タブレット**: 1.5カラム
- **スマホ**: 1カラム（全幅表示）

#### ボタンサイズ
- **PC**: 通常サイズ（高さ 40px 程度）
- **タブレット**: 中程度（高さ 44px 程度）
- **スマホ**: 大きめ（高さ 48px 以上、指でタップしやすい）

### 3.2 スマホ専用の設計

#### 画面仕様
- **推奨解像度**: 375px × 667px（iPhone SE）
- **最小サポート**: 320px 幅
- **最大サポート**: 480px 幅（表示可能だが、最適化されない可能性）

#### ナビゲーション
- **ハンバーガーメニュー**: 画面左上
- **ホームボタン**: パンくずリストに統合、またはホームアイコン
- **戻るボタン**: ブラウザの戻るボタン or 画面上部の「戻る」リンク

#### 情報表示
- **主要情報**: 画面上部に優先表示
- **詳細情報**: スクロールで表示
- **重要度の低い情報**: 「詳細を表示」リンクで折りたたみ表示

#### フォーム
- **1項目1行**: 複数フィールドを横並びにしない
- **ボタン**: 画面幅いっぱい、高さ 48px 以上
- **入力フィールド**: 高さ 44px 以上（指でタップしやすい）

#### 画像
- **最大幅**: 画面幅 100%（パディング除外）
- **最大ファイルサイズ**: 3MB
- **対応形式**: JPG, PNG, GIF, SVG

#### テキスト
- **本文フォントサイズ**: 16px 以上（ズーム防止）
- **見出し**: 24px 以上
- **行間**: 1.5 以上

---

## 4. 実装チェックリスト

### 開発前
- [ ] 対象画面がPC対応か、スマホ専用かを確認
- [ ] ブレークポイントの設定を確認
- [ ] ナビゲーション構造を確認

### 開発中
- [ ] レスポンシブデザインの動作確認（Chrome DevTools）
- [ ] スマホ実機での動作確認
- [ ] タブレット での動作確認
- [ ] フォント読み込みの遅延確認
- [ ] 画像最適化（WebP フォーマット等）

### テスト時
- [ ] PC（1920×1080）での表示確認
- [ ] タブレット（768×1024）での表示確認
- [ ] スマホ（375×667）での表示確認
- [ ] 最小幅（320px）での表示確認
- [ ] 縦横向き切り替えでの表示確認
- [ ] ボタン・リンクのタップしやすさ確認
- [ ] フォーム入力の容易さ確認
- [ ] 画像読み込み速度確認

### デプロイ前
- [ ] lighthouse での Responsive Design スコア確認
- [ ] Google PageSpeed Insights でのスコア確認
- [ ] 実機テスト（iPhone・Android）完了

---

## 5. 技術スタック

### フロントエンドフレームワーク

| デバイス対応 | フレームワーク | 備考 |
| --- | --- | --- |
| PC対応（Responsive） | React + Tailwind CSS または Bootstrap | 統一推奨 |
| スマホ専用 | React + Tailwind CSS または React Native | スマホ最適化 |

### CSS フレームワーク

```
Tailwind CSS 推奨:
- Utility-first approach
- Responsive Design 対応
- モバイルファースト
```

### 画像最適化

```
Next.js Image コンポーネント:
- 自動フォーマット変換（WebP等）
- レスポンシブ画像（srcset）
- 遅延読み込み
```

---

## 6. パフォーマンス指標

### Core Web Vitals（Google 基準）

| 指標 | 目標値 | デバイス |
| --- | --- | --- |
| LCP (Largest Contentful Paint) | < 2.5s | PC / スマホ共通 |
| FID (First Input Delay) | < 100ms | PC / スマホ共通 |
| CLS (Cumulative Layout Shift) | < 0.1 | PC / スマホ共通 |

### ページ読み込み時間

| デバイス | 目標値 | 備考 |
| --- | --- | --- |
| PC（有線） | < 2s | 1920×1080, Fast 3G |
| スマホ（4G） | < 3s | 375×667, Fast 4G |
| スマホ（3G） | < 5s | 375×667, Slow 3G |

---

## 7. 将来の拡張

### PWA（Progressive Web App）対応
- オフラインでの基本機能利用
- ネイティブアプリのようなインストール
- プッシュ通知

### ダークモード対応
```css
@media (prefers-color-scheme: dark) {
  /* ダークモード用スタイル */
}
```

### アクセシビリティ対応
- WCAG 2.1 AA レベル準拠
- スクリーンリーダー対応
- キーボード操作対応

---

## 8. 参考：デバイス別の主な違い

### スマホ専用 vs PC対応（Responsive）

| 項目 | スマホ専用 | PC対応 |
| --- | --- | --- |
| 開発工数 | 中 | 中～高 |
| 保守性 | 高（スマホのみ） | 中（複数デバイス対応） |
| UX | スマホに最適 | 複数デバイスに対応 |
| 本体容量 | 小 | 中 |
| 読み込み速度 | 速い | 中程度 |
| スケーラビリティ | 限定的 | 高 |

### 推奨判断基準

**スマホ専用を選ぶ場合**:
- モバイルファーストで、PCアクセスが少ない場合
- スマホUIに特化したい場合
- 現場対応者向けのシンプル機能

**PC対応（Responsive）を選ぶ場合**:
- 複数デバイスでの利用が想定される場合
- 複雑な機能・多くのデータ表示が必要な場合
- 管理・運用向けの汎用システム

---

## 9. デバイス対応完了チェック

- [ ] 全PC対応画面で Responsive Design が動作
- [ ] 全スマホ専用画面がスマホで最適化表示される
- [ ] ブレークポイントで意図した切り替えが発生
- [ ] 全ボタンが 44px 以上の高さ（タップしやすい）
- [ ] テキストが 16px 以上（ズーム不要）
- [ ] 画像が適切に圧縮・最適化されている
- [ ] Core Web Vitals を満たしている
